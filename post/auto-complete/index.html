<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/static/saebasol.icon.png"/><title>자동완성 | Saebasol</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="자동완성을 구현하고 싶었어요"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:type" content="article"/><meta property="og:title" content="자동완성"/><meta property="og:description" content="자동완성을 구현하고 싶었어요"/><meta property="og:image" content="http://blog.saebasol.org/post/auto-complete/thumbnail.png"/><meta property="og:image:alt" content="Thumbnail of 자동완성 on Saebasol."/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/d4992c3366463a46b999.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d4992c3366463a46b999.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-fdb8e1ae910a36dfe0d7.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4012791932e9f5689531.js" as="script"/><link rel="preload" href="/_next/static/chunks/a0722373.ee9ee134a128dc09e485.js" as="script"/><link rel="preload" href="/_next/static/chunks/cddaf4ba713d32a03318b3904c1c6a45676b3f09.115d32a11aa091be966a.js" as="script"/><link rel="preload" href="/_next/static/chunks/ad0635eae76ef079e0a066eda9ded36166aafb25.567909f1e0a6d2f88664.js" as="script"/><link rel="preload" href="/_next/static/chunks/5b445f274a8cdc63c3044755a044cb08b3e2e83d.e7c101953fa0b26bb467.js" as="script"/><link rel="preload" href="/_next/static/chunks/30e47c0805b252ba4e30c09b82f9a8da5cad7f6f.4c84379afb860ad17a83.js" as="script"/><link rel="preload" href="/_next/static/chunks/b44e4af87672e97627f752c1ce5896fd24a747b2.94c3935e876b0b466c33.js" as="script"/><link rel="preload" href="/_next/static/chunks/af34e2db61f97cedc6ebfbaa0d751a83f9f0d9f6.828bc2e09a6c8b39be31.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-0d078e35e868aab8cfa8.js" as="script"/><link rel="preload" href="/_next/static/chunks/e7a6caeb.ded972b50bbdd7ab7ea3.js" as="script"/><link rel="preload" href="/_next/static/chunks/686e6332.89681c4dcde130485dd7.js" as="script"/><link rel="preload" href="/_next/static/chunks/321dfbae.7b994ab64ce442378af9.js" as="script"/><link rel="preload" href="/_next/static/chunks/db7eaf8c0075ed034fb49dbdba2e4d1e28ba110c.66798c67461b9db9a1ec.js" as="script"/><link rel="preload" href="/_next/static/chunks/512691bc17121b23e77e919bddf153cbe0097582.4a63bcd2139829e6a011.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5Bslug%5D-f8d9c689fbe14df67ac5.js" as="script"/></head><body><div id="__next"><style data-emotion="css-global 1syi0wy">html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;touch-action:manipulation;}body{position:relative;min-height:100%;font-feature-settings:'kern';}*,*::before,*::after{border-width:0;border-style:solid;box-sizing:border-box;}main{display:block;}hr{border-top-width:1px;box-sizing:content-box;height:0;overflow:visible;}pre,code,kbd,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:1em;}a{background-color:transparent;color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bold;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none!important;}input[type="number"]{-moz-appearance:textfield;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none!important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}template{display:none;}[hidden]{display:none!important;}body,blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}ol,ul{margin:0;padding:0;}textarea{resize:vertical;}button,[role="button"]{cursor:pointer;}button::-moz-focus-inner{border:0!important;}table{border-collapse:collapse;}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle;}img,video{max-width:100%;height:auto;}[data-js-focus-visible] :focus:not([data-focus-visible-added]){outline:none;box-shadow:none;}select::-ms-expand{display:none;}</style><style data-emotion="css-global 1ct3dms">body{font-family:Inter,Noto Sans KR;color:#1A202C;background:#FFFFFF;-webkit-transition:background-color 0.2s;transition:background-color 0.2s;line-height:1.5;}*::-webkit-input-placeholder{color:#A0AEC0;}*::-moz-placeholder{color:#A0AEC0;}*:-ms-input-placeholder{color:#A0AEC0;}*::placeholder{color:#A0AEC0;}*,*::before,::after{border-color:#E2E8F0;word-wrap:break-word;}</style><style data-emotion="css 89v9aq">.css-89v9aq{background:#000000;margin-bottom:25px;}</style><div class="css-89v9aq"><style data-emotion="css 1piyyew">.css-1piyyew{width:100%;margin-left:auto;margin-right:auto;max-width:1000px;padding-left:1rem;padding-right:1rem;}</style><div class="chakra-container css-1piyyew"><style data-emotion="css ekty9c">.css-ekty9c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:9px 0;}</style><div class="css-ekty9c"><style data-emotion="css j8x285">.css-j8x285{font-family:Inter,Noto Sans KR;font-weight:700;font-size:0.875rem;line-height:1.2;padding-right:16px;color:#E2E8F0;}</style><h2 class="chakra-heading css-j8x285"><style data-emotion="css 1bvdrhg">.css-1bvdrhg{-webkit-transition:all 0.15s ease-out;transition:all 0.15s ease-out;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:none;color:inherit;}.css-1bvdrhg:hover,.css-1bvdrhg[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1bvdrhg:focus,.css-1bvdrhg[data-focus]{box-shadow:0 0 0 3px rgba(66, 153, 225, 0.6);}</style><a href="/">Saebasol</a></h2><h2 class="chakra-heading css-j8x285"><a href="/about/">About</a></h2><style data-emotion="css 17xejub">.css-17xejub{-webkit-flex:1;-ms-flex:1;flex:1;justify-self:stretch;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;}</style><div class="css-17xejub"></div><style data-emotion="css dajk44">.css-dajk44{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;color:#E2E8F0;background:#000000;}.css-dajk44>*:not(style)~*:not(style){margin-left:0.2rem;}</style><div role="group" class="chakra-button__group css-dajk44"><style data-emotion="css ql0pmr">.css-ql0pmr{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transition:all 250ms;transition:all 250ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:none;width:auto;line-height:1.2;border-radius:0.375rem;font-weight:600;height:2rem;min-width:2rem;font-size:0.875rem;padding-left:0.75rem;padding-right:0.75rem;color:inherit;padding:0;}.css-ql0pmr:focus,.css-ql0pmr[data-focus]{box-shadow:0 0 0 3px rgba(66, 153, 225, 0.6);z-index:1;}.css-ql0pmr[disabled],.css-ql0pmr[disabled]:focus,.css-ql0pmr[disabled]:hover,.css-ql0pmr[aria-disabled=true],.css-ql0pmr[aria-disabled=true]:focus,.css-ql0pmr[aria-disabled=true]:hover,.css-ql0pmr[data-disabled],.css-ql0pmr[data-disabled]:focus,.css-ql0pmr[data-disabled]:hover{opacity:0.4;cursor:not-allowed;box-shadow:none;}.css-ql0pmr:hover,.css-ql0pmr[data-hover]{background-color:#1A202C;}.css-ql0pmr:active,.css-ql0pmr[data-active]{background:#E2E8F0;}</style><button type="button" class="chakra-button css-ql0pmr"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" aria-hidden="true" focusable="false" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path fill-rule="nonzero" d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></g></svg></button><button type="button" class="chakra-button css-ql0pmr"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" aria-hidden="true" focusable="false" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M22.162 5.656a8.384 8.384 0 0 1-2.402.658A4.196 4.196 0 0 0 21.6 4c-.82.488-1.719.83-2.656 1.015a4.182 4.182 0 0 0-7.126 3.814 11.874 11.874 0 0 1-8.62-4.37 4.168 4.168 0 0 0-.566 2.103c0 1.45.738 2.731 1.86 3.481a4.168 4.168 0 0 1-1.894-.523v.052a4.185 4.185 0 0 0 3.355 4.101 4.21 4.21 0 0 1-1.89.072A4.185 4.185 0 0 0 7.97 16.65a8.394 8.394 0 0 1-6.191 1.732 11.83 11.83 0 0 0 6.41 1.88c7.693 0 11.9-6.373 11.9-11.9 0-.18-.005-.362-.013-.54a8.496 8.496 0 0 0 2.087-2.165z"></path></g></svg></button></div></div></div></div><style data-emotion="css 8fcpzi">.css-8fcpzi{width:100%;margin-left:auto;margin-right:auto;max-width:750px;padding-left:1rem;padding-right:1rem;}</style><div class="chakra-container css-8fcpzi"><style data-emotion="css deddn1">.css-deddn1{font-family:Inter,Noto Sans KR;font-weight:700;font-size:3rem;line-height:1;margin:20px 0;}@media screen and (min-width: 48em){.css-deddn1{font-size:3.75rem;}}</style><h2 class="chakra-heading css-deddn1">자동완성</h2><p class="chakra-text css-0">자동완성을 구현하고 싶었어요</p><style data-emotion="css imf64c">.css-imf64c{opacity:0.6;border:0;border-color:inherit;border-style:solid;border-bottom-width:1px;width:100%;margin:9px 0;}</style><hr role="separator" aria-orientation="horizontal" class="chakra-divider css-imf64c"/><style data-emotion="css 1vgrz58">.css-1vgrz58{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:16px 0;}.css-1vgrz58>*:not(style)~*:not(style){-webkit-margin-start:0.5rem;margin-inline-start:0.5rem;margin-top:0;}</style><div class="chakra-stack css-1vgrz58"><style data-emotion="css 1scx264">.css-1scx264{border-radius:9999px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;text-transform:uppercase;font-weight:500;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;background:transparent;color:#1A202C;border-color:#FFFFFF;vertical-align:top;width:3rem;height:3rem;font-size:calc(3rem / 2.5);}</style><span class="chakra-avatar css-1scx264"><style data-emotion="css uo84k3">.css-uo84k3{font-size:calc(3rem / 2.5);line-height:3rem;}</style><div aria-label="SaidBySolo" class="chakra-avatar__initials css-uo84k3">S</div></span><div class="css-0"><style data-emotion="css 1bvdrhg">.css-1bvdrhg{-webkit-transition:all 0.15s ease-out;transition:all 0.15s ease-out;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:none;color:inherit;}.css-1bvdrhg:hover,.css-1bvdrhg[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1bvdrhg:focus,.css-1bvdrhg[data-focus]{box-shadow:0 0 0 3px rgba(66, 153, 225, 0.6);}</style><a class="chakra-link css-1bvdrhg" href="/author/saidbysolo"><style data-emotion="css v4ou1e">.css-v4ou1e{font-family:Inter,Noto Sans KR;font-weight:700;font-size:1.25rem;line-height:1.2;}</style><style data-emotion="css 1boyif6">.css-1boyif6{-webkit-transition:all 0.15s ease-out;transition:all 0.15s ease-out;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:none;color:inherit;font-family:Inter,Noto Sans KR;font-weight:700;font-size:1.25rem;line-height:1.2;}.css-1boyif6:hover,.css-1boyif6[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1boyif6:focus,.css-1boyif6[data-focus]{box-shadow:0 0 0 3px rgba(66, 153, 225, 0.6);}</style><a class="chakra-link chakra-heading css-1boyif6">SaidBySolo</a></a><p class="chakra-text css-0">03/10/2021</p></div></div></div><style data-emotion="css yiqt12">.css-yiqt12{width:100%;margin-left:auto;margin-right:auto;max-width:1100px;padding-left:1rem;padding-right:1rem;}</style><style data-emotion="css 1jdqthp">.css-1jdqthp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:100%;margin-left:auto;margin-right:auto;max-width:1100px;padding-left:1rem;padding-right:1rem;}</style><div class="chakra-container css-1jdqthp"><style data-emotion="css 1jmprma">.css-1jmprma{margin:45px 0;box-shadow:0 25px 50px -12px rgba(0, 0, 0, 0.25);border-radius:0.375rem;}</style><img alt="Thumbnail image of 자동완성." class="chakra-image__placeholder css-1jmprma" src="../../static/thumbnails/another-warmness.png"/></div><style data-emotion="css 8fcpzi">.css-8fcpzi{width:100%;margin-left:auto;margin-right:auto;max-width:750px;padding-left:1rem;padding-right:1rem;}</style><div class="chakra-container css-8fcpzi"><style data-emotion="css sklrp3">.css-sklrp3{margin:28px 0;}</style><div class="css-sklrp3"><style data-emotion="css 5adzih">.css-5adzih{margin:9px 0;}</style><p class="chakra-text css-5adzih"><style data-emotion="css 1bvdrhg">.css-1bvdrhg{-webkit-transition:all 0.15s ease-out;transition:all 0.15s ease-out;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:none;color:inherit;}.css-1bvdrhg:hover,.css-1bvdrhg[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1bvdrhg:focus,.css-1bvdrhg[data-focus]{box-shadow:0 0 0 3px rgba(66, 153, 225, 0.6);}</style><a class="chakra-link css-1bvdrhg" href="https://github.com/SaidBySolo/auto-complete">깃허브</a>에서 작성한 코드를 보실수있습니다!</p><style data-emotion="css krrc24">.css-krrc24{font-family:Inter,Noto Sans KR;font-weight:700;font-size:1.875rem;line-height:1.33;margin:20px 0;}@media screen and (min-width: 48em){.css-krrc24{font-size:2.25rem;line-height:1.2;}}</style><h2 class="chakra-heading css-krrc24">자동완성?</h2><p class="chakra-text css-5adzih">일단 구글에 가서 자신이 원하는 검색을 대충 해보자.</p><p class="chakra-text css-5adzih">자신이 원했던 검색이 검색창 밑에 주르륵 뜰것이다.</p><p class="chakra-text css-5adzih">난 이걸 구현하려고 한다.</p><h2 class="chakra-heading css-krrc24">구현방법?</h2><p class="chakra-text css-5adzih">구현은 어렵지 않다.</p><p class="chakra-text css-5adzih">파이썬일 경우는 <style data-emotion="css 1dvx7i9">.css-1dvx7i9{display:inline-block;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:0.875rem;padding-left:0.2em;padding-right:0.2em;border-radius:0.125rem;background:#EDF2F7;color:#1A202C;}</style><code class="chakra-code css-1dvx7i9">in</code></p><p class="chakra-text css-5adzih">자바스크립트는 <code class="chakra-code css-1dvx7i9">.includes</code>를 쓰면 쉽게 구현이 될것같다.</p><p class="chakra-text css-5adzih">근데 문제는 이것이 아니다.</p><h2 class="chakra-heading css-krrc24">클라이언트 vs 서버</h2><p class="chakra-text css-5adzih">자동완성을 처리하는 주체가 누가 될것인지 매우 고민이 된다.</p><p class="chakra-text css-5adzih">각각 장점과 단점이 있다.</p><style data-emotion="css 8u6v4g">.css-8u6v4g{font-family:Inter,Noto Sans KR;font-weight:700;font-size:1.5rem;line-height:1.33;margin:16px 0;}@media screen and (min-width: 48em){.css-8u6v4g{font-size:1.875rem;line-height:1.2;}}</style><h3 class="chakra-heading css-8u6v4g">클라이언트</h3><p class="chakra-text css-5adzih">말 그대로 클라이언트에게 처리하도록 냅둔다.</p><style data-emotion="css fcc6gh">.css-fcc6gh{font-family:Inter,Noto Sans KR;font-weight:700;font-size:1.25rem;line-height:1.2;margin:12px 0;}</style><h4 class="chakra-heading css-fcc6gh">장점</h4><style data-emotion="css tglcnw">.css-tglcnw{list-style-type:initial;margin-left:1em;margin:14px;}</style><ul role="list" class="css-tglcnw"><li>서버에 부담이 줄어든다!</li></ul><h4 class="chakra-heading css-fcc6gh">양날의검</h4><ul role="list" class="css-tglcnw"><li>사용자의 기기 사양을 탄다</li></ul><h3 class="chakra-heading css-8u6v4g">서버</h3><p class="chakra-text css-5adzih">서버에서 처리한다.</p><h4 class="chakra-heading css-fcc6gh">장점</h4><ul role="list" class="css-tglcnw"><li>클라이언트에 부담이 줄어든다!</li></ul><h4 class="chakra-heading css-fcc6gh">단점</h4><ul role="list" class="css-tglcnw"><li>서버비.... :(</li></ul><h2 class="chakra-heading css-krrc24">그래서 뭘 골라야 하는건데?</h2><p class="chakra-text css-5adzih">사실 나도 몰?루</p><p class="chakra-text css-5adzih">일단 제일먼저 구글을 한번 보았는데</p><p class="chakra-text css-5adzih">검색어 칠때마다 서버에 요청후 결과값 받은걸 실시간으로 보여주었다.</p><p class="chakra-text css-5adzih">근데 지금 내가 필요한 케이스하고 다르다.</p><p class="chakra-text css-5adzih">구글 같은경우는 처리해야할 데이터가 워낙 방대하고</p><p class="chakra-text css-5adzih">바뀔것도 많기 때문에 서버에서 처리하는것으로 예상된다.</p><p class="chakra-text css-5adzih">하지만 나는 자동완성될 항목이 정해져있다.</p><p class="chakra-text css-5adzih">이 말은 굳이 서버에서 진행할 필요가없다!</p><h2 class="chakra-heading css-krrc24">라고 할뻔...</h2><p class="chakra-text css-5adzih">원래 구현은 이렇게 생각했다.</p><p class="chakra-text css-5adzih">자동완성 되어야할 단어들을 서버에서 준후 캐시.</p><p class="chakra-text css-5adzih">클라이언트가 해당 단어를 처리해서 개멋있게 보여준다.</p><p class="chakra-text css-5adzih">근데 지금 생각하니까 처리 해야할게 생각보다 많았다.</p><p class="chakra-text css-5adzih">거의 몇십만개를 반복문돌려서 비슷한걸 찾아준다?</p><p class="chakra-text css-5adzih">이야 이거만큼 자원 잡아 먹는게 없다고 ㅋㅋㅋㅋ</p><h2 class="chakra-heading css-krrc24">양자택일</h2><p class="chakra-text css-5adzih">뭘 고르든 하나는 악으로 깡으로 버터야한다.</p><p class="chakra-text css-5adzih">서버의 사양이 그리 좋은것도 아니라서 클라이언트단에서 작업 하면 좋겠으나, 클라이언트 단에서 작업 하기에는 너무 양이 많다.</p><p class="chakra-text css-5adzih">그리고 검색시에 단어가 들어가있는 항목의 갯수를 가져오는것도 고민해 보고있다.</p><p class="chakra-text css-5adzih">사용자의 사양에 JavaScript를 믿을것인가 아니면 서버의 Python을 믿을건인가 고민을 하고 있었는데...</p><h2 class="chakra-heading css-krrc24">그런데 그때 몽고가 나타났다...</h2><p class="chakra-text css-5adzih">현재 서버는 MongoDB와 MariaDB 두개를 사용중이다.</p><p class="chakra-text css-5adzih">MongoDB Atlas에서 배포중이여서 search함수를 잘 사용하고있었는데</p><p class="chakra-text css-5adzih">거기에 <a class="chakra-link css-1bvdrhg" href="https://docs.atlas.mongodb.com/reference/atlas-search/autocomplete/">https://docs.atlas.mongodb.com/reference/atlas-search/autocomplete/</a> 이런 귀한것이 있었다.</p><p class="chakra-text css-5adzih">근데 이것도 문제가있었다.</p><p class="chakra-text css-5adzih">사용자가 검색하는 형식과 디비에 저장되어있는 형식이 달라서 이를 변환하는 작업이 필요하다.</p><p class="chakra-text css-5adzih">일단 몽고디비에 이런것이 있으니 서버사이드는 확실해 진것 같다.</p><h2 class="chakra-heading css-krrc24">이게 그렇게 쉽게 끝날리가있겠냐고 ㅋㅋㅋ</h2><p class="chakra-text css-5adzih">Atlas Search가 아직 기능들이 많이 개발중이다.</p><p class="chakra-text css-5adzih"><a class="chakra-link css-1bvdrhg" href="https://feedback.mongodb.com/forums/924868-atlas-search/suggestions/42349711-allow-autocomplete-search-on-multiple-fields-using">https://feedback.mongodb.com/forums/924868-atlas-search/suggestions/42349711-allow-autocomplete-search-on-multiple-fields-using</a></p><p class="chakra-text css-5adzih">심지어 배열이 적용이 되지않아 지금 환경과는 맞지않아 조금 무리가 있다.</p><p class="chakra-text css-5adzih">근데 제목검색을 돌려보니 결과는 만족스럽다. 추후에 많이 개발이되면 autocomplete를 써봐야할것같다.</p><h2 class="chakra-heading css-krrc24">다시 원점으로</h2><p class="chakra-text css-5adzih">아직 대안은 많다.</p><p class="chakra-text css-5adzih">ElasticSearch를 쓰는것도 한 방법이고, 기존방법을 쓰는것도 방법중 하나이다.</p><p class="chakra-text css-5adzih">일단 기존에 생각해둔 구현방법을 써보기로했다.</p><h2 class="chakra-heading css-krrc24">기존 구현</h2><p class="chakra-text css-5adzih">Python일경우 <code class="chakra-code css-1dvx7i9">in</code> 자바스크립트는 <code class="chakra-code css-1dvx7i9">.includes</code> 구문을 사용해 작업해볼것이다.</p><p class="chakra-text css-5adzih">18586 정도의 양으로 한번 테스트를 해볼것이다.</p><p class="chakra-text css-5adzih"><code class="chakra-code css-1dvx7i9">result-korean-character</code> 파일을 사용한다.</p><h3 class="chakra-heading css-8u6v4g">Python</h3><p class="chakra-text css-5adzih">0.0122564초 정도 걸렸다.</p><h3 class="chakra-heading css-8u6v4g">JavaScript</h3><p class="chakra-text css-5adzih">Node.js 기준 0.036초 정도 걸렸다.</p><h3 class="chakra-heading css-8u6v4g">기존 구현에 대한 결론</h3><p class="chakra-text css-5adzih">그렇게 신경 쓰이는 정도는 아닌거같다.</p><h2 class="chakra-heading css-krrc24">검증</h2><p class="chakra-text css-5adzih">실제로 웹서버와 웹페이지를 만들어서 검증했다.</p><h3 class="chakra-heading css-8u6v4g">서버에서 처리했을경우</h3><p class="chakra-text css-5adzih"><style data-emotion="css gmuwbf">.css-gmuwbf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="css-gmuwbf"><style data-emotion="css 1em9sie">.css-1em9sie{margin:14px 0;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1),0 2px 4px -1px rgba(0, 0, 0, 0.06);border-radius:0.375rem;max-height:750px;}</style><img alt="image" class="chakra-image__placeholder css-1em9sie"/></div></p><h3 class="chakra-heading css-8u6v4g">웹에서 처리했을경우</h3><p class="chakra-text css-5adzih"><div class="css-gmuwbf"><img alt="image" class="chakra-image__placeholder css-1em9sie"/></div></p><h2 class="chakra-heading css-krrc24">기존에 생각한 방법으로 구현했을경우 정리</h2><p class="chakra-text css-5adzih">생각보다 깔끔하게 나와서 괜찮은것같았다.</p><p class="chakra-text css-5adzih">하지만 로컬에 요청하고, 서버의 사양은 이보다 더 낮기 때문에 이를 감안 해야 할거같다.</p><p class="chakra-text css-5adzih">그렇지만 이렇게 쓸만하다는것은 프로덕션에 올려도 나쁘지 않을것 같다고 본다.</p><p class="chakra-text css-5adzih">하지만 이것으로 구현하게 된다면 오타가 난다면 못찾기 때문에,</p><p class="chakra-text css-5adzih">ElasticSearch나 현재 MongoDB 구조를 바꿔서 Autocomplete 기능도 같이 써본후 비교할 계획이다.</p></div></div><style data-emotion="css 1gryo0t">.css-1gryo0t{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:24px 0;}</style><div class="css-1gryo0t">Copyright <!-- -->2022<!-- --> <!-- -->Saebasol<!-- --> contributors.</div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"user":{"name":"SaidBySolo","email":"saidbysolo@gmail.com","bio":":D","avatar":"https://avatars.githubusercontent.com/u/33891531"},"data":{"title":"자동완성","author":"saidbysolo","date":1633219200000,"sort":"자동완성을 구현하고 싶었어요","thumbnail":"thumbnail.png","slug":"auto-complete","source":"Auto complete"},"mdxModule":"\n[깃허브](https://github.com/SaidBySolo/auto-complete)에서 작성한 코드를 보실수있습니다!\n\n## 자동완성?\n\n일단 구글에 가서 자신이 원하는 검색을 대충 해보자.\n\n자신이 원했던 검색이 검색창 밑에 주르륵 뜰것이다.\n\n난 이걸 구현하려고 한다.\n\n## 구현방법?\n\n구현은 어렵지 않다.\n\n파이썬일 경우는 ``in``\n\n자바스크립트는 ``.includes``를 쓰면 쉽게 구현이 될것같다.\n\n근데 문제는 이것이 아니다.\n\n## 클라이언트 vs 서버\n\n자동완성을 처리하는 주체가 누가 될것인지 매우 고민이 된다.\n\n각각 장점과 단점이 있다.\n\n### 클라이언트\n\n말 그대로 클라이언트에게 처리하도록 냅둔다.\n\n#### 장점\n\n* 서버에 부담이 줄어든다!\n\n#### 양날의검\n\n* 사용자의 기기 사양을 탄다\n\n### 서버\n\n서버에서 처리한다.\n\n#### 장점\n\n* 클라이언트에 부담이 줄어든다!\n\n#### 단점\n\n* 서버비.... :(\n\n## 그래서 뭘 골라야 하는건데?\n\n사실 나도 몰?루\n\n일단 제일먼저 구글을 한번 보았는데\n\n검색어 칠때마다 서버에 요청후 결과값 받은걸 실시간으로 보여주었다.\n\n근데 지금 내가 필요한 케이스하고 다르다.\n\n구글 같은경우는 처리해야할 데이터가 워낙 방대하고\n\n바뀔것도 많기 때문에 서버에서 처리하는것으로 예상된다.\n\n하지만 나는 자동완성될 항목이 정해져있다.\n\n이 말은 굳이 서버에서 진행할 필요가없다!\n\n## 라고 할뻔...\n\n원래 구현은 이렇게 생각했다.\n\n자동완성 되어야할 단어들을 서버에서 준후 캐시.\n\n클라이언트가 해당 단어를 처리해서 개멋있게 보여준다.\n\n근데 지금 생각하니까 처리 해야할게 생각보다 많았다.\n\n거의 몇십만개를 반복문돌려서 비슷한걸 찾아준다?\n\n이야 이거만큼 자원 잡아 먹는게 없다고 ㅋㅋㅋㅋ\n\n## 양자택일\n\n뭘 고르든 하나는 악으로 깡으로 버터야한다.\n\n서버의 사양이 그리 좋은것도 아니라서 클라이언트단에서 작업 하면 좋겠으나, 클라이언트 단에서 작업 하기에는 너무 양이 많다.\n\n그리고 검색시에 단어가 들어가있는 항목의 갯수를 가져오는것도 고민해 보고있다.\n\n사용자의 사양에 JavaScript를 믿을것인가 아니면 서버의 Python을 믿을건인가 고민을 하고 있었는데...\n\n## 그런데 그때 몽고가 나타났다...\n\n현재 서버는 MongoDB와 MariaDB 두개를 사용중이다.\n\nMongoDB Atlas에서 배포중이여서 search함수를 잘 사용하고있었는데\n\n거기에 https://docs.atlas.mongodb.com/reference/atlas-search/autocomplete/ 이런 귀한것이 있었다.\n\n근데 이것도 문제가있었다.\n\n사용자가 검색하는 형식과 디비에 저장되어있는 형식이 달라서 이를 변환하는 작업이 필요하다.\n\n일단 몽고디비에 이런것이 있으니 서버사이드는 확실해 진것 같다.\n\n## 이게 그렇게 쉽게 끝날리가있겠냐고 ㅋㅋㅋ\n\nAtlas Search가 아직 기능들이 많이 개발중이다.\n\nhttps://feedback.mongodb.com/forums/924868-atlas-search/suggestions/42349711-allow-autocomplete-search-on-multiple-fields-using\n\n심지어 배열이 적용이 되지않아 지금 환경과는 맞지않아 조금 무리가 있다.\n\n근데 제목검색을 돌려보니 결과는 만족스럽다. 추후에 많이 개발이되면 autocomplete를 써봐야할것같다.\n\n## 다시 원점으로\n\n아직 대안은 많다.\n\nElasticSearch를 쓰는것도 한 방법이고, 기존방법을 쓰는것도 방법중 하나이다.\n\n일단 기존에 생각해둔 구현방법을 써보기로했다.\n\n## 기존 구현\n\nPython일경우 ``in`` 자바스크립트는 ``.includes`` 구문을 사용해 작업해볼것이다.\n\n18586 정도의 양으로 한번 테스트를 해볼것이다.\n\n``result-korean-character`` 파일을 사용한다.\n\n### Python\n\n0.0122564초 정도 걸렸다.\n\n### JavaScript\n\nNode.js 기준 0.036초 정도 걸렸다.\n\n### 기존 구현에 대한 결론\n\n그렇게 신경 쓰이는 정도는 아닌거같다.\n\n## 검증\n\n실제로 웹서버와 웹페이지를 만들어서 검증했다.\n\n### 서버에서 처리했을경우\n\n![image](server.gif)\n\n### 웹에서 처리했을경우\n\n![image](web.gif)\n\n## 기존에 생각한 방법으로 구현했을경우 정리\n\n생각보다 깔끔하게 나와서 괜찮은것같았다.\n\n하지만 로컬에 요청하고, 서버의 사양은 이보다 더 낮기 때문에 이를 감안 해야 할거같다.\n\n그렇지만 이렇게 쓸만하다는것은 프로덕션에 올려도 나쁘지 않을것 같다고 본다.\n\n하지만 이것으로 구현하게 된다면 오타가 난다면 못찾기 때문에,\n\nElasticSearch나 현재 MongoDB 구조를 바꿔서 Autocomplete 기능도 같이 써본후 비교할 계획이다.\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"auto-complete"},"buildId":"9IzSZJuwZsP6XRLA4PWa0","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-c57da6e8818a9153d0ca.js"></script><script src="/_next/static/chunks/main-fdb8e1ae910a36dfe0d7.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.4012791932e9f5689531.js" async=""></script><script src="/_next/static/chunks/a0722373.ee9ee134a128dc09e485.js" async=""></script><script src="/_next/static/chunks/cddaf4ba713d32a03318b3904c1c6a45676b3f09.115d32a11aa091be966a.js" async=""></script><script src="/_next/static/chunks/ad0635eae76ef079e0a066eda9ded36166aafb25.567909f1e0a6d2f88664.js" async=""></script><script src="/_next/static/chunks/5b445f274a8cdc63c3044755a044cb08b3e2e83d.e7c101953fa0b26bb467.js" async=""></script><script src="/_next/static/chunks/30e47c0805b252ba4e30c09b82f9a8da5cad7f6f.4c84379afb860ad17a83.js" async=""></script><script src="/_next/static/chunks/b44e4af87672e97627f752c1ce5896fd24a747b2.94c3935e876b0b466c33.js" async=""></script><script src="/_next/static/chunks/af34e2db61f97cedc6ebfbaa0d751a83f9f0d9f6.828bc2e09a6c8b39be31.js" async=""></script><script src="/_next/static/chunks/pages/_app-0d078e35e868aab8cfa8.js" async=""></script><script src="/_next/static/chunks/e7a6caeb.ded972b50bbdd7ab7ea3.js" async=""></script><script src="/_next/static/chunks/686e6332.89681c4dcde130485dd7.js" async=""></script><script src="/_next/static/chunks/321dfbae.7b994ab64ce442378af9.js" async=""></script><script src="/_next/static/chunks/db7eaf8c0075ed034fb49dbdba2e4d1e28ba110c.66798c67461b9db9a1ec.js" async=""></script><script src="/_next/static/chunks/512691bc17121b23e77e919bddf153cbe0097582.4a63bcd2139829e6a011.js" async=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-f8d9c689fbe14df67ac5.js" async=""></script><script src="/_next/static/9IzSZJuwZsP6XRLA4PWa0/_buildManifest.js" async=""></script><script src="/_next/static/9IzSZJuwZsP6XRLA4PWa0/_ssgManifest.js" async=""></script></body></html>